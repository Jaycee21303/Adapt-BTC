{% include 'components/header.html' %}
<link rel="stylesheet" href="{{ url_for('portal.static', filename='css/portal.css') }}">
<div class="navbar">
  <div>{{ course.title }} Results</div>
  <div>
    <a href="{{ url_for('portal.course_detail', course_id=course.id) }}">Course</a>
    <a href="{{ url_for('portal.logout') }}">Logout</a>
  </div>
</div>
<div class="container">
  <h2>Your Score: {{ correct }}/{{ total }} ({{ (score*100)|round(0) }}%)</h2>
  {% if passed %}
  <div class="alert success">Congrats! Download your certificate once you finish all lessons.</div>
  <a class="btn" href="{{ url_for('portal.certificate', course_id=course.id) }}">Download certificate</a>
  {% else %}
  <div class="alert warning">Review the feedback below and try again.</div>
  {% endif %}
  {% for item in graded %}
  <div class="card">
    <p><strong>Q{{ loop.index }}.</strong> {{ item.prompt }}</p>
    <p>Your answer: {{ item.user_answer + 1 }}</p>
    <p>Correct answer: {{ item.correct_answer + 1 }}</p>
    <div class="alert {% if item.is_correct %}success{% else %}danger{% endif %}">{{ item.explanation }}</div>
  </div>
  {% endfor %}
</div>
{% include 'components/footer.html' %}
