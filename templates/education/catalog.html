{% extends 'education/base.html' %}
{% block content %}
<section class="hero">
  <div>
    <p class="badge">Education Portal</p>
    <h1>Structured Bitcoin curriculum</h1>
    <p>Browse levels, tracks, and hands-on labs built to scale to hundreds of courses.</p>
    <div class="flex">
      <a class="btn" href="#catalog">Explore courses</a>
      <a class="btn btn-secondary" href="/consulting">Talk to an expert</a>
    </div>
  </div>
  <div class="card" style="background: white;">
    <h3>Search & filter</h3>
    <p>Use the manifest-backed catalog for instant filtering without disk scans.</p>
    <ul class="list">
      <li>Levels 0â€“5</li>
      <li>Tracks across Bitcoin & beyond</li>
      <li>Tags and estimated hours</li>
    </ul>
  </div>
</section>

<form class="search" method="get" id="catalog">
  <input type="text" name="q" placeholder="Search courses" value="{{ query or '' }}">
  <select name="level">
    <option value="">All levels</option>
    {% for lvl in range(0,6) %}
      <option value="{{ lvl }}" {% if selected_level==lvl %}selected{% endif %}>Level {{ lvl }}</option>
    {% endfor %}
  </select>
  <select name="track">
    <option value="">All tracks</option>
    <option value="bitcoin-core" {% if selected_track=='bitcoin-core' %}selected{% endif %}>Bitcoin Core</option>
    <option value="beyond-bitcoin" {% if selected_track=='beyond-bitcoin' %}selected{% endif %}>Beyond Bitcoin</option>
  </select>
  <input type="text" name="tags" placeholder="Tags comma separated" value="{{ selected_tags|join(',') }}">
  <select name="sort">
    <option value="">Sort</option>
    <option value="title" {% if sort=='title' %}selected{% endif %}>Title</option>
    <option value="estimated_hours" {% if sort=='estimated_hours' %}selected{% endif %}>Estimated hours</option>
    <option value="level" {% if sort=='level' %}selected{% endif %}>Level</option>
  </select>
</form>

<h2 class="section-title">All courses</h2>
<div class="grid">
  {% for course in courses %}
    <div class="card">
      <div class="flex">
        <span class="badge">Level {{ course.level }}</span>
        <span class="pill">{{ course.track }}</span>
        {% if course.quiz %}<span class="pill">Quiz</span>{% endif %}
      </div>
      <h3>{{ course.title }}</h3>
      <p>{{ course.summary or 'No summary provided.' }}</p>
      <div class="flex">
        {% for tag in course.tags %}<span class="pill">{{ tag }}</span>{% endfor %}
      </div>
      <p><strong>{{ course.estimated_hours }} hrs</strong></p>
      <a class="btn" href="/education/course/{{ course.id }}">Open course</a>
    </div>
  {% else %}
    <p>No courses found. Build the manifest to load catalog data.</p>
  {% endfor %}
</div>
{% endblock %}
